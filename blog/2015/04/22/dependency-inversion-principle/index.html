<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Software Developer focused on good practices, clean code, agile development and continuous learning">
    <meta name="author" content="Marcos Segovia">
    <title>
                        Dependency Inversion Principle (DIP) and the Abstract Factory Pattern &mdash; Software Development
            </title>                        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/styles/github.min.css" />
                <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://marcossegovia.github.io/themes/sculpin/bootstrap-3-blog-theme/assets/css/bootstrap.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
<link rel="shortcut icon" type="image/png" href="http://marcossegovia.github.io/favicon.ico"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>
            <link href="http://marcossegovia.github.io/themes/sculpin/bootstrap-3-blog-theme/assets/css/style.css" rel="stylesheet" media="screen">
            <link href="http://marcossegovia.github.io/assets/css/style.css" rel="stylesheet" media="screen">
    </head>
<body>
                        <header role="banner"><div class="container">
    <h1>
        Software Development
                    <small>A blog from a young programmer apprentice</small>
            </h1>
</div>
</header>
                                    <nav role="navigation"><div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav" id="main-menu">
    <li><a href="http://marcossegovia.github.io/">Home</a></li>
    <li><a href="http://marcossegovia.github.io/blog/archives">Archives</a></li>
    <li><a href="http://marcossegovia.github.io/blog/categories">Categories</a></li>
    <li><a href="http://marcossegovia.github.io/blog/tags">Tags</a></li>
    <li><a href="http://marcossegovia.github.io/about">About</a></li>
    <li><a href="http://marcossegovia.github.io/bookshelf">Bookshelf</a></li>
</ul>
        </div><!--/.nav-collapse -->
    </div>
</div>
</nav>
                                <div id="main">
        <div id="content">
                
    <div class="container">
    <div class="col-md-9 col-lg-9">
                    
    <article class="hentry" role="article">
          <header>
          <h1 class="entry-title">Dependency Inversion Principle (DIP) and the Abstract Factory Pattern</h1>
        <p class="meta">
      <time datetime="2015-04-22T00:00:00+00:00" pubdate>
        <span class='month'>Apr</span> <span class='day'>22nd</span> <span class='year'>2015</span>
      </time>
    </p>
  </header>
  <div class="entry-content"><p><strong>DIP</strong> or <strong>Dependency Inversion Principle</strong> stands as one of the most important mechanism of OOP.</p>

<p>The principle says that <em>'only concrete classes or functions should depend from interfaces or abstract classes'</em>.
In the same way, it is like telling every dependency should run upon interfaces or abstract classes.
No matter what, we're not allowed to depend from concrete classes as they are much more likely to change.</p>

<p>But, what about the fact on instantiating objects within our applications? We're automatically made to depend on a concrete class.
Because of that there is a pattern called <strong>Abstract Factory</strong> which allows us to depend only in one concrete class, the factory.
The factory class will provide with the object we want it to make, without worrying about how it deals with.</p>

<p>We'll keep an eye on this with an example:</p>

<pre><code class="php">interface FruitFactoryInterface
{
    public function getApple();
    public function getPear();
    public function getOrange();
    public function getBanana();
}

class FruitFactory implements FruitFactoryInterface
{
    public function getApple()
    {
        return  new Apple();
    }

    public function getPear()
    {
        return new Pear();
    }

    public function getOrange()
    {
        return new Orange();
    }

    public function getBanana()
    {
        return new Banana();
    }
}

abstract class Fruit
{
    protected $color;
    protected $flavour;

    protected function __construct($color, $flavour)
    {
        $this-&gt;color = $color;
        $this-&gt;flavour = $flavour;
    }

    abstract protected function iTasteLike();

}

class Apple extends Fruit
{
    public function __construct()
    {
        parent::__construct('red', 'tasty');
    }

    public function iTasteLike()
    {
        echo 'I am '.$this-&gt;color.' color and I taste '.$this-&gt;flavour;
    }
}

class Pear extends Fruit
{
    public function __construct()
    {
        parent::__construct('green', 'awkward');
    }

    public function iTasteLike()
    {
        echo 'I am '.$this-&gt;color.' color and I taste '.$this-&gt;flavour;
    }
}

class Orange extends Fruit
{
    public function __construct()
    {
        parent::__construct('orange', 'sour');
    }

    public function iTasteLike()
    {
        echo 'I am '.$this-&gt;color.' color and I taste '.$this-&gt;flavour;
    }
}

class Banana extends Fruit
{
    public function __construct()
    {
        parent::__construct('yellow', 'overly sweet');
    }

    public function iTasteLike()
    {
        echo 'I am '.$this-&gt;color.' color and I taste '.$this-&gt;flavour;
    }
}
</code></pre>

<p>With so, we instantiate our Factory and we just call whatever object we want to obtain, letting the Factory deal with the instantiation.</p>

<pre><code class="php">$fruitFactory = new FruitFactory();

$apple = $fruitFactory-&gt;getApple();
$pear = $fruitFactory-&gt;getPear();
$orange = $fruitFactory-&gt;getOrange();
$banana = $fruitFactory-&gt;getBanana();

$apple-&gt;iTasteLike();
echo '&lt;/br&gt;';
$pear-&gt;iTasteLike();
echo '&lt;/br&gt;';
$orange-&gt;iTasteLike();
echo '&lt;/br&gt;';
$banana-&gt;iTasteLike();
</code></pre>

<p>And of course, our output will be something like this:</p>

<p><img class="img-thumbnail" src="http://marcossegovia.github.io/assets/images/2015-04-22/output.png" alt="output Abstract Factory" /></p>

<p><strong>Bibliography:</strong></p>

<p><a href="https://sourcemaking.com/design_patterns/abstract_factory">https://sourcemaking.com/design_patterns/abstract_factory</a></p>

<p><a href="http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf">http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf</a></p>
</div>

  <div class="taxonomies">
            <p class="categories">
        Categories:
                <a class="label label-primary" href="http://marcossegovia.github.io/blog/categories/Design%20Principles">Design Principles</a>
                <a class="label label-primary" href="http://marcossegovia.github.io/blog/categories/Design%20Patterns">Design Patterns</a>
                <a class="label label-primary" href="http://marcossegovia.github.io/blog/categories/PHP">PHP</a>
                </p>
                <p class="tags">
        Tags:
                <a class="label label-default" href="http://marcossegovia.github.io/blog/tags/design%20principles">design principles</a>
                <a class="label label-default" href="http://marcossegovia.github.io/blog/tags/design%20patterns">design patterns</a>
                <a class="label label-default" href="http://marcossegovia.github.io/blog/tags/good%20practices">good practices</a>
                <a class="label label-default" href="http://marcossegovia.github.io/blog/tags/infraestructure">infraestructure</a>
                <a class="label label-default" href="http://marcossegovia.github.io/blog/tags/oop">oop</a>
                </p>
      </div>
    </article>

            <nav class="ordered-content">
                            <a class="next" href="http://marcossegovia.github.io/blog/2015/08/29/thoughts-about-this-year">&laquo; Thoughts about this year 2014-2015</a>
                                        <a class="prev" href="http://marcossegovia.github.io/blog/2015/04/19/open-closed-principle">Open Closed Principle (OCP) &raquo;</a>
                    </nav>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'marcossegovia';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            </div>
    <div class="col-md-3 col-lg-3">
        <aside class="sidebar">
            <div class="well">
    <div class="centering">
        <img class="img-rounded" src="http://marcossegovia.github.io/assets/images/marcos.jpg" />
        <h3>Marcos Segovia</h3>
        <p>is a Software Developer since 2013, who took the road to become a software craftman.</p>
        <p>'The Right Thing and the Thing Right'</p>
        <div class="links-net">
            <a href="https://twitter.com/marcossegov"><i class="fa fa-twitter"></i></a>
            <a href="https://www.linkedin.com/in/marcossegovia"><i class="fa fa-linkedin"></i></a>
            <a href="https://github.com/MarcosSegovia"><i class="fa fa-github"></i></a>
            <a href="http://marcossegovia.github.io/atom.xml"><i class="fa fa-rss"></i></a>
        </div>
    </div>
</div>
<div class="well sidebar-nav">
    <div class="centering">
        <h4>Links</h4>
        <ul class="nav">
            <li><a href="http://sculpin.io">sculpin.io</a></li>
            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
        </ul>
    </div>
</div>
        </aside>
    </div>
</div>
        </div>
    </div>
                        <footer role="contentinfo"><div class="container">
    <p>
        Copyright &copy; 2015 -
         Marcos Segovia -         <span class="credit">Powered by <a href="http://sculpin.io">Sculpin</a></span>
    </p>
</div>
</footer>
                <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
